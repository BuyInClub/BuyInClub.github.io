<html xmlns="https://www.w3.org/TR/REC-html40">

<head>
    <meta http-equiv=Content-Type content="text/html; charset=windows-1252">
    <link rel="stylesheet" type="text/css" href="https://6pac.github.io/SlickGrid/slick.grid.css">
    <link rel="stylesheet" type="text/css" href="https://6pac.github.io/SlickGrid/examples/examples.css">
    <link rel="stylesheet" type="text/css" href="https://6pac.github.io/SlickGrid/css/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="gridstyles.css" type="text/css" />
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.0/jquery-ui.min.js"></script>
    <script src="https://6pac.github.io/SlickGrid/lib/jquery.event.drag-2.3.0.js"></script>
    <script src="https://6pac.github.io/SlickGrid/slick.core.js"></script>
    <script src="https://6pac.github.io/SlickGrid/slick.grid.js"></script>
    <script src="https://6pac.github.io/SlickGrid/slick.dataview.js"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script type="text/javascript" src="allins.js"></script>

</head>


<body>
    <div style="position:relative">
        <div style="width:1250px;">
            <div class="grid-header" style="width:100%">
                <label>All-Ins ($10 or more)</label>
            </div>
            <div style="border:1px solid gray;background:wheat;padding:6px;">
                <div style="float:left">
                    <label>Filters: Session-Table:Hand: </label>
                    <input size="20" type=text id="sessionTableHandSearch">
                    <label>Player: </label>
                    <input size="10" type=text id="playerSearch">
                    <label>Action: </label>
                    <input size="15" type=text id="actionSearch">
                    <label>Action Amount GEQ: </label>
                    <input type="number" min="0" max="999" type=text id="actionAmountSearch">
                    <label>Step: </label>
                    <input size="8" type=text id="stepSearch">
                </div>
                <div style="text-align: right">
                    <button id="clearFilters">Clear</button>
                    <button id="search">Filter</button>
                </div>
                <label>Search Summary -  </label>
                <label id="searchResults"></label>
            </div>

            <div class="container">
                <div id="myGridAI" style="width:100%"></div>
            </div>
        </div>
    </div>

</body>

</html>

<script>
    var options = {
        enableCellNavigation: true,
        enableColumnReorder: true,
        multiColumnSort: true,
        autoHeight: true,
    };

    var HtmlFormatter = function (row, cell, value, columnDef, dataContext) {
        if (value == null) return '';

        return value.toString();
    }

    var gridAI;
    var columnsAI = [
        { id: "sessionTableHand", name: "Session-Table:Hand", field: "sessionTableHand", sortable: true, minWidth: 160 },
        { id: "wonLost", name: "Won/Lost", field: "wonLost", sortable: true, minWidth: 50 },
        { id: "player", name: "Player", field: "player", sortable: true, formatter: addLinkToAI, minWidth: 50 },
        { id: "step", name: "Step", field: "step", sortable: true },
        { id: "action", name: "Action", field: "action", sortable: true, minWidth: 75 },
        { id: "amount", name: "Amount", field: "amount", sortable: true, minWidth: 50 },
        { id: "pot", name: "Pot Size", field: "pot", sortable: true, minWidth: 50 },
        { id: "amountToPot", name: "Amount/Pot", field: "amountToPot", sortable: true, minWidth: 50 },
        { id: "holeCards", name: "Hole Cards", field: "holeCards", formatter: HtmlFormatter },
        { id: "boardCards", name: "Board Cards", field: "boardCards", minWidth: 120, formatter: HtmlFormatter },
        { id: "holeCardsRank", name: "HC Rank", field: "holeCardsRank", sortable: true, minWidth: 42 },
        { id: "numOuts", name: "# Outs", field: "numOuts", sortable: true, minWidth: 42 },
        { id: "winningHand", name: "Winning Hand", field: "winningHand", minWidth: 160 },
    ];


    function addLinkToAI(row, cell, value, columnDef, dataContext) {
        var rtn;
        if (dataContext.link === "") {
            rtn = value;
        }
        else {
            rtn = "<a href='" + dataContext.link + "'>" + value + "</a>";
        }
        return rtn;
    }

    gridAI = new Slick.Grid("#myGridAI", allInList, columnsAI, options);


    gridAI.onSort.subscribe(function (e, args) {
        var cols = args.sortCols;

        allInList.sort(function (dataRow1, dataRow2) {
            for (var i = 0, l = cols.length; i < l; i++) {
                var field = cols[i].sortCol.field;
                var sign = cols[i].sortAsc ? 1 : -1;

                if (cols[i].sortCol.field === 'holeCardsRank' || cols[i].sortCol.field === 'numOuts') {
                    var value1 = parseIntWithDefault(dataRow1[field]),
                        value2 = parseIntWithDefault(dataRow2[field]);
                }
                else {
                    var value1 = dataRow1[field],
                        value2 = dataRow2[field];
                }
                var result = (value1 == value2 ? 0 : (value1 > value2 ? 1 : -1)) * sign;
                if (result != 0) {
                    return result;
                }
            }
            return 0;
        });

        gridAI.invalidate();
        gridAI.render();
    });

    function parseIntWithDefault(value)
    {
        var result = parseInt(value);
        if (isNaN(result)) { result = -1; }
        return result;
    }
</script>
