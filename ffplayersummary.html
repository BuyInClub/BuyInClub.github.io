<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <!-- external files -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/styles/css/slick.grid.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/styles/css/slick-default-theme.css">
    <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.9.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="gridstyles.css" type="text/css" />
    <link href="rebuystyles.css" rel="stylesheet" type="text/css">

    <script src=https://cdn.jsdelivr.net/npm/flatpickr></script>
    <script src=https://cdn.jsdelivr.net/npm/sortablejs/Sortable.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/slick.core.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/slick.interactions.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/slick.formatters.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/slick.editors.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/plugins/slick.rowselectionmodel.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/slick.grid.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/slick.dataview.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/controls/slick.pager.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/controls/slick.columnpicker.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/slickgrid@5.0.0/dist/browser/plugins/slick.resizer.min.js></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- internal filels -->
    <script type="text/javascript" src="fftotals.js"></script>

    <style>
        .slick-preheader-panel.ui-state-default {
            width: 100%;
            overflow: hidden;
            border-left: 0px !important;
            border-bottom: 0px !important;
        }

        .slick-preheader-panel .slick-header-columns {
            border-bottom: 0px !important;
        }
    </style>
</head>

<body>
    <div style="position:relative">
        <div style="width:1120px;">
            <div class="grid-header" style="width:100%">
                <label>Foolish or Fortitude (min. 5 people in hand)</label>
            </div>
            <div class="container">
                <div id="myGridFF" style="width:100%"></div>
            </div>
        </div>
    </div>
    <br>
    <p style="font-size:12pt; color:#fff; margin-bottom: 0em;">
        Some information on how the percentages are calculated:
    </p>
    <ul class="a">
        <li>if you have seen cards for the street, it is counted.  For example if you go all-in on the flop and you get called, you will have seen the turn and river.</li>
        <li>Percentage won is # of won hands divided by hands seen on that street.</li>
        <li>Percentage folded is # of folded hands divided by hands seen on that street.</li>
        <li>The amount won or lost per hand is based on the last street you saw cards.</li>
    </ul>


    <script>
        function CreateAddlHeaderRow() {
            var $preHeaderPanel = $(gridFF.getPreHeaderPanel())
                .empty()
                .addClass("slick-header-columns")
                .css('left', '-1000px')
                .width(gridFF.getHeadersWidth());
            $preHeaderPanel.parent().addClass("slick-header");

            var headerColumnWidthDiff = gridFF.getHeaderColumnWidthDiff();
            var m, header, lastColumnGroup = '', widthTotal = 0;

            for (var i = 0; i < columnsFF.length; i++) {
                m = columnsFF[i];
                if (lastColumnGroup === m.columnGroup && i > 0) {
                    widthTotal += m.width;
                    header.width(widthTotal - headerColumnWidthDiff)
                } else {
                    widthTotal = m.width;
                    header = $("<div class='ui-state-default slick-header-column' />")
                        .html("<span class='slick-column-name'>" + (m.columnGroup || '') + "</span>")
                        .width(m.width - headerColumnWidthDiff)
                        .appendTo($preHeaderPanel);
                }
                lastColumnGroup = m.columnGroup;
            }
        }

        var gridFF;
        var optionsFF = {
            enableCellNavigation: true,
            enableColumnReorder: false,
            createPreHeaderPanel: true,
            showPreHeaderPanel: true,
            preHeaderPanelHeight: 23,
            explicitInitialization: true,
            autoHeight: true,
            multiColumnSort: true,
        };


        var columnsFF = [
            { id: "name", name: "Name", field: "name", sortable: true, minWidth: 50 },
            { id: "preflopPercentSeen", name: "% seen", field: "preflopPercentSeen", sortable: true, width: 65, columnGroup: "Preflop" },
            { id: "preflopPercentFolded", name: "% folded", field: "preflopPercentFolded", sortable: true, width: 65, columnGroup: "Preflop" },
            { id: "preflopPercentWon", name: "% won", field: "preflopPercentWon", sortable: true, width: 65, columnGroup: "Preflop" },
            { id: "preflopAmountWonPerHand", name: "amount", field: "preflopAmountWonPerHand", sortable: true, width: 65, columnGroup: "Preflop" },

            { id: "flopPercentSeen", name: "% seen", field: "flopPercentSeen", sortable: true, width: 65, columnGroup: "Flop" },
            { id: "flopPercentFolded", name: "% folded", field: "flopPercentFolded", sortable: true, width: 65, columnGroup: "Flop" },
            { id: "flopPercentWon", name: "% won", field: "flopPercentWon", sortable: true, width: 65, columnGroup: "Flop" },
            { id: "flopAmountWonPerHand", name: "amount", field: "flopAmountWonPerHand", sortable: true, width: 65, columnGroup: "Flop" },

            { id: "turnPercentSeen", name: "% seen", field: "turnPercentSeen", sortable: true, width: 65, columnGroup: "Turn" },
            { id: "turnPercentFolded", name: "% folded", field: "turnPercentFolded", sortable: true, width: 65, columnGroup: "Turn" },
            { id: "turnPercentWon", name: "% won", field: "turnPercentWon", sortable: true, width: 65, columnGroup: "Turn" },
            { id: "turnAmountWonPerHand", name: "amount", field: "turnAmountWonPerHand", sortable: true, width: 65, columnGroup: "Turn" },

            { id: "riverPercentSeen", name: "% seen", field: "riverPercentSeen", sortable: true, width: 65, columnGroup: "River" },
            { id: "riverPercentFolded", name: "% folded", field: "riverPercentFolded", sortable: true, width: 65, columnGroup: "River" },
            { id: "riverPercentWon", name: "% won", field: "riverPercentWon", sortable: true, width: 65, columnGroup: "River" },
            { id: "riverAmountWonPerHand", name: "amount", field: "riverAmountWonPerHand", sortable: true, width: 65, columnGroup: "River" },
        ];

        $(function () {
            gridFF = new Slick.Grid("#myGridFF", ffListSummary, columnsFF, optionsFF);


            // start sort
            gridFF.onSort.subscribe(function (e, args) {
                var cols = args.sortCols;

                ffListSummary.sort(function (dataRow1, dataRow2) {
                    for (var i = 0, l = cols.length; i < l; i++) {
                        var field = cols[i].sortCol.field;
                        var sign = cols[i].sortAsc ? 1 : -1;
                        var value1 = dataRow1[field], value2 = dataRow2[field];
                        var result = (value1 == value2 ? 0 : (value1 > value2 ? 1 : -1)) * sign;
                        if (result != 0) {
                            return result;
                        }
                    }
                    return 0;
                });

                gridFF.invalidate();
                gridFF.render();
            });

            // end of sort

            gridFF.init();

            gridFF.onColumnsResized.subscribe(function (e, args) {
                CreateAddlHeaderRow();
            });

            CreateAddlHeaderRow();

            gridFF.invalidate();
            gridFF.render();
            // end of with out dataView

        })
    </script>
</body>

</html>